<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kuis Ramadhan 2 (Edisi Zakat dan Idul Fitri)</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Signika:wght@400;700&family=Kanit&family=Acme&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://unpkg.com/tone"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    <style>
         body {
            font-family: 'Roboto', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #1A3C34; /* Hijau Tua */
            margin: 0;
            padding: 0;
            width: 100%;
            overflow-x: hidden;
            position: relative;
        }

        #gameArea {
            background-color: #fff;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center; /* Ensures children are centered by default */
            max-width: 100%;
            width: 95%;
            box-sizing: border-box;
            position: relative;
        }

        #timerContainer {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 15px;
        }

        #timerIcon {
            width: 40px;
            height: 40px;
            margin-right: 10px;
        }

        #timer {
            font-family: 'Acme', sans-serif;
            font-size: 40px;
            color: #2E4A47; /* Hijau Gelap */
        }

        #judulGame {
            font-family: 'Signika', sans-serif;
            font-size: 40px;
            color: #D4AF37; /* Emas */
            margin-bottom: 15px;
            font-weight: bold;
            /* text-align: center; */ /* Already centered by #gameArea */
        }
        #judulGame.ramadhan {
            color: #D4AF37;
        }

        #petunjuk {
            font-size: 24px;
            margin-bottom: 20px;
            color: #333;
            /* text-align: left; */ /* REMOVED this line to allow centering */
            line-height: 1.4; /* Keep line height for readability */
        }

        #pilihanGanda {
            display: flex;
            flex-wrap: wrap;
            justify-content: center; /* Center the buttons container */
            margin-bottom: 20px;
        }

        #pilihanGanda button {
            font-size: 18px;
            padding: 12px 15px;
            margin: 8px;
            border: none;
            border-radius: 8px;
            background-color: #F5E8C7;
            color: #2E4A47;
            cursor: pointer;
            transition: background-color 0.3s ease;
            flex: 1 1 100%;
            max-width: calc(50% - 16px); /* Two buttons per row on larger screens, adjust if needed */
            min-width: 150px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
            display: flex;
            align-items: center;
            text-align: left; /* Keep options left-aligned inside buttons */
            line-height: 1.4;
        }


        #pilihanGanda button:hover { background-color: #E8DAB2; }
        #pilihanGanda button.selected { background-color: #f0ad4e; }
        #pilihanGanda button.salah { background-color: #FF0000; animation: shake 0.5s; }

        @keyframes shake {
            0% { transform: translateX(0); } 25% { transform: translateX(-5px); } 50% { transform: translateX(5px); } 75% { transform: translateX(-5px); } 100% { transform: translateX(0); }
        }

        #hasil {
            font-size: 24px;
            margin-top: 20px;
            font-weight: bold;
            color: #333;
        }

        .fireworks, .firework { display: none; }

        @media (max-width: 768px) {
            #judulGame { font-size: 30px; }
            #petunjuk { font-size: 18px; }
            #pilihanGanda button {
                font-size: 15px;
                padding: 10px 12px;
                min-width: 100%;
                max-width: 100%;
                margin: 6px 0;
            }
            #hasil { font-size: 20px; }
            #timer { font-size: 30px; }
            #timerIcon { width: 30px; height: 30px; }
        }

        @media (max-width: 600px) {
            #judulGame { font-size: 26px; }
             #petunjuk { font-size: 16px; }
            #pilihanGanda button { font-size: 14px; }
            #timer { font-size: 25px; }
            #timerIcon { width: 25px; height: 25px; }
        }
        #skor {
            position: absolute; bottom: 10px; right: 10px; font-size: 18px; font-weight: bold; color: #333;
        }
        #skorBenar { color: #00FF00; }
        #skorSalah { color: #FF0000; }

        #startButton, #learnMoreButton {
            font-size: 24px; padding: 12px 20px; margin: 8px; border: none; border-radius: 8px; background-color: #F5E8C7; color: #2E4A47; cursor: pointer; transition: background-color 0.3s ease;
        }
        #startButton:hover, #learnMoreButton:hover { background-color: #E8DAB2; }

        #bismillah { font-size: 20px; color: #333; margin-top: 10px; }
        #skorAkhir { font-size: 28px; font-weight: bold; }

        @keyframes popup { 0% { transform: scale(0); opacity: 0; } 50% { transform: scale(1.2); opacity: 1; } 100% { transform: scale(1); opacity: 1; } }
        .popup-animation { animation: popup 0.5s ease-in-out forwards; }

        #copyright { position: absolute; top: 10px; right: 10px; font-family: 'Kanit', sans-serif; font-size: 14px; color: #F5E8C7; }

        #correctAnimation, #wrongAnimation { position: absolute; top: 10px; width: 80px; height: 80px; display: none; }
        #correctAnimation { right: 10px; }
        #wrongAnimation { right: 100px; }

        @media (max-width: 768px) { #wrongAnimation { right: 10px; } }
    </style>
</head>
<body>
    <div id="gameArea">
        <div id="timerContainer" style="display: none;">
            <img id="timerIcon" src="https://img.icons8.com/ios-filled/50/2E4A47/hourglass.png" alt="Hourglass">
            <span id="timer">04:00</span>
        </div>
        <h1 id="judulGame">Kuis Ramadhan 2 (Edisi Zakat dan Idul Fitri)</h1>
        <p id="petunjuk">Selamat datang di Kuis Ramadhan!</p>
        <div id="startScreen">
            <button id="startButton">Start</button>
            <p id="bismillah">Bismillah</p>
        </div>
        <div id="pilihanGanda" style="display: none;">
            <!-- Buttons will be generated by JavaScript -->
        </div>
        <p id="hasil"></p>
        <div class="fireworks"></div>
        <div id="correctAnimation"></div>
        <div id="wrongAnimation"></div>
        <div id="skor" style="display: none;">
            Benar: <span id="skorBenar">0</span> / Salah: <span id="skorSalah">0</span>
        </div>
    </div>
    <div id="copyright">Â© Mas Har</div>
    <script>
        // --- START: Question Data (Numbers Removed) ---
        const dataTebakan = [
            {
                deskripsi: "Kapan waktu yang paling utama (afdhal) untuk menunaikan Zakat Fithri menurut penjelasan dalam modul?",
                jawaban: "c. Sejak malam takbiran (malam Idul Fithri) hingga sebelum pelaksanaan Shalat Id.",
                pilihan: [
                    "a. Sejak awal bulan Ramadhan hingga akhir.",
                    "b. Satu atau dua hari sebelum hari raya Idul Fithri.",
                    "c. Sejak malam takbiran (malam Idul Fithri) hingga sebelum pelaksanaan Shalat Id.",
                    "d. Setelah selesai Shalat Idul Fithri hingga sebelum matahari terbenam."
                ],
                judul: "Kuis Ramadhan 2 (Edisi Zakat dan Idul Fitri)",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Berdasarkan hadits Ibnu Umar yang dikutip, Zakat Fithri diwajibkan atas setiap muslim. Siapakah yang tidak termasuk dalam kewajiban ini secara langsung (meskipun mungkin ditanggung oleh walinya)?",
                jawaban: "c. Janin yang masih dalam kandungan (meskipun dianjurkan oleh sebagian ulama).",
                pilihan: [
                    "a. Anak kecil yang belum baligh.",
                    "b. Seorang budak muslim.",
                    "c. Janin yang masih dalam kandungan (meskipun dianjurkan oleh sebagian ulama).",
                    "d. Orang dewasa yang mampu secara finansial."
                ],
                judul: "Kuis Ramadhan 2 (Edisi Zakat dan Idul Fitri)",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Apa ukuran standar Zakat Fithri yang harus dikeluarkan untuk setiap jiwa menurut hadits yang disebutkan?",
                jawaban: "b. Satu sha' dari makanan pokok setempat.",
                pilihan: [
                    "a. 2.5 kilogram beras atau gandum.",
                    "b. Satu sha' dari makanan pokok setempat.",
                    "c. Sejumlah uang yang setara dengan harga 3 kg kurma.",
                    "d. Empat genggam tangan orang dewasa (mud) gandum saja."
                ],
                judul: "Kuis Ramadhan 2 (Edisi Zakat dan Idul Fitri)",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Menurut pendapat mayoritas ulama yang dikuatkan dalam modul, bagaimana hukum mengeluarkan Zakat Fithri setelah selesai melaksanakan Shalat Idul Fithri?",
                jawaban: "d. Tidak lagi dianggap sebagai Zakat Fithri, melainkan sedekah biasa dan berdosa jika menunda tanpa udzur.",
                pilihan: [
                    "a. Masih dianggap Zakat Fithri yang sah jika ada udzur.",
                    "b. Dianggap sah namun makruh.",
                    "c. Boleh dilakukan jika terlupa.",
                    "d. Tidak lagi dianggap sebagai Zakat Fithri, melainkan sedekah biasa dan berdosa jika menunda tanpa udzur."
                ],
                judul: "Kuis Ramadhan 2 (Edisi Zakat dan Idul Fitri)",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Sesuai sunnah yang dipaparkan, apa yang sebaiknya dilakukan sebelum berangkat untuk Shalat Idul Fithri?",
                jawaban: "b. Memakan beberapa butir kurma dalam jumlah ganjil.",
                pilihan: [
                    "a. Berpuasa hingga selesai shalat.",
                    "b. Memakan beberapa butir kurma dalam jumlah ganjil.",
                    "c. Tidak makan apapun hingga pulang dari shalat.",
                    "d. Memperbanyak tidur agar fit saat shalat."
                ],
                judul: "Kuis Ramadhan 2 (Edisi Zakat dan Idul Fitri)",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Apa hukum asal pelaksanaan Shalat Idul Fithri menurut pendapat yang lebih kuat berdasarkan dalil yang disebutkan (seperti hadits Ummu Athiyyah)?",
                jawaban: "a. Fardhu 'Ain (wajib bagi setiap individu muslim).",
                pilihan: [
                    "a. Fardhu 'Ain (wajib bagi setiap individu muslim).",
                    "b. Fardhu Kifayah (wajib kolektif).",
                    "c. Sunnah Muakkadah (sunnah yang sangat ditekankan).",
                    "d. Sunnah biasa."
                ],
                judul: "Kuis Ramadhan 2 (Edisi Zakat dan Idul Fitri)",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Di manakah tempat yang paling utama (sesuai sunnah Nabi ï·º) untuk melaksanakan Shalat Idul Fithri, kecuali jika ada udzur seperti hujan?",
                jawaban: "c. Di tanah lapang.",
                pilihan: [
                    "a. Di masjid jami' terbesar di kota.",
                    "b. Di mushalla dekat rumah.",
                    "c. Di tanah lapang.",
                    "d. Di aula serbaguna yang luas."
                ],
                judul: "Kuis Ramadhan 2 (Edisi Zakat dan Idul Fitri)",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Berapa jumlah takbir tambahan (di luar takbiratul ihram dan takbir intiqal) yang dilakukan pada rakaat pertama Shalat Idul Fithri menurut pendapat mayoritas ulama yang dikutip?",
                jawaban: "c. Tujuh kali takbir.",
                pilihan: [
                    "a. Lima kali takbir.",
                    "b. Enam kali takbir.",
                    "c. Tujuh kali takbir.",
                    "d. Delapan kali takbir."
                ],
                judul: "Kuis Ramadhan 2 (Edisi Zakat dan Idul Fitri)",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Apa yang disunnahkan untuk dilakukan saat menempuh perjalanan pergi dan pulang dari tempat Shalat Id?",
                jawaban: "b. Melewati jalan yang berbeda antara pergi dan pulang.",
                pilihan: [
                    "a. Menggunakan kendaraan yang sama persis.",
                    "b. Melewati jalan yang berbeda antara pergi dan pulang.",
                    "c. Berjalan kaki saat pergi dan naik kendaraan saat pulang.",
                    "d. Membaca Al-Qur'an dengan suara keras sepanjang jalan."
                ],
                judul: "Kuis Ramadhan 2 (Edisi Zakat dan Idul Fitri)",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Apa status adzan dan iqamah dalam pelaksanaan Shalat Idul Fithri?",
                jawaban: "d. Tidak disyariatkan (tidak ada adzan dan iqamah).",
                pilihan: [
                    "a. Wajib dikumandangkan seperti shalat fardhu.",
                    "b. Sunnah dikumandangkan sebelum shalat dimulai.",
                    "c. Makruh jika dikumandangkan.",
                    "d. Tidak disyariatkan (tidak ada adzan dan iqamah)."
                ],
                judul: "Kuis Ramadhan 2 (Edisi Zakat dan Idul Fitri)",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Menurut pendapat yang dikuatkan dalam modul berdasarkan atsar Ibnu Mas'ud, bacaan apa yang dianjurkan di sela-sela takbir tambahan (takbir zawaid) pada Shalat Id?",
                jawaban: "a. Pujian kepada Allah (hamdalah, tasbih) dan shalawat Nabi ï·º.",
                pilihan: [
                    "a. Pujian kepada Allah (hamdalah, tasbih) dan shalawat Nabi ï·º.",
                    "b. Surat Al-Fatihah secara lirih.",
                    "c. Doa iftitah diulang-ulang.",
                    "d. Tidak ada bacaan apapun, cukup diam sejenak."
                ],
                judul: "Kuis Ramadhan 2 (Edisi Zakat dan Idul Fitri)",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Bagaimana urutan pelaksanaan Shalat Idul Fithri dan Khotbahnya menurut sunnah?",
                jawaban: "a. Shalat dua rakaat, kemudian dilanjutkan dengan khotbah.",
                pilihan: [
                    "a. Shalat dua rakaat, kemudian dilanjutkan dengan khotbah.",
                    "b. Khotbah terlebih dahulu, baru kemudian shalat dua rakaat.",
                    "c. Shalat satu rakaat, khotbah, lalu shalat satu rakaat lagi.",
                    "d. Khotbah di antara dua rakaat shalat."
                ],
                judul: "Kuis Ramadhan 2 (Edisi Zakat dan Idul Fitri)",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Apa hukum mengangkat tangan pada setiap takbir tambahan (takbir zawaid) dalam Shalat Id menurut pendapat yang dipilih berdasarkan keumuman dalil?",
                jawaban: "d. Disunnahkan berdasarkan keumuman hadits mengangkat tangan saat takbir.",
                pilihan: [
                    "a. Wajib dilakukan.",
                    "b. Bid'ah (tidak boleh dilakukan).",
                    "c. Makruh (sebaiknya ditinggalkan).",
                    "d. Disunnahkan berdasarkan keumuman hadits mengangkat tangan saat takbir."
                ],
                judul: "Kuis Ramadhan 2 (Edisi Zakat dan Idul Fitri)",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Jika Hari Raya Idul Fithri jatuh bertepatan dengan hari Jum'at, bagaimana hukum Shalat Jum'at bagi orang yang sudah melaksanakan Shalat Id?",
                jawaban: "a. Gugur kewajiban Shalat Jum'at baginya (tidak wajib), namun imam tetap menyelenggarakannya.",
                pilihan: [
                    "a. Gugur kewajiban Shalat Jum'at baginya (tidak wajib), namun imam tetap menyelenggarakannya.",
                    "b. Tetap wajib melaksanakan Shalat Jum'at.",
                    "c. Wajib mengganti Shalat Jum'at dengan Shalat Dzuhur.",
                    "d. Shalat Id sudah menggantikan Shalat Jum'at dan Shalat Dzuhur sekaligus."
                ],
                judul: "Kuis Ramadhan 2 (Edisi Zakat dan Idul Fitri)",
                kategori: "ramadhan"
            },
            {
                deskripsi: "Apa ucapan selamat (tahniah) yang disunnahkan di hari raya, sebagaimana dicontohkan oleh para sahabat?",
                jawaban: "d. \"Taqabbalallahu minna wa minkum.\"",
                pilihan: [
                    "a. \"Minal 'aidin wal faizin.\"",
                    "b. \"Selamat Hari Raya, mohon maaf lahir dan batin.\"",
                    "c. \"Eid Mubarak, barakallahu fiikum.\"",
                    "d. \"Taqabbalallahu minna wa minkum.\""
                ],
                judul: "Kuis Ramadhan 2 (Edisi Zakat dan Idul Fitri)",
                kategori: "ramadhan"
            }
        ];
        // --- END: Question Data ---

        // Variabel global
        let soalSaatIni;
        let synth = new Tone.Synth().toDestination();
        let jawabanBenar = false;
        let skorBenar = 0;
        let skorSalah = 0;
        let soalSudahDitampilkan = new Set();
        let nomorSoal = 0;
        const totalSoal = 15;
        let isStartSoundPlayed = false;
        let timerInterval = null;
        let timeLeft = 240; // 4 menit
        let isGameOverSoundPlayed = false;

        // Fungsi suara
        function playSound(type, specificAudioFile) {
            let audioFile;
            if (type === 'success') audioFile = 'success.wav';
            else if (type === 'fail') audioFile = 'gameovertwew.wav';
            else if (type === 'start' && !isStartSoundPlayed) { audioFile = 'ping.wav'; isStartSoundPlayed = true; }
            else if (type === 'gameover' && specificAudioFile) audioFile = specificAudioFile;
            else if (type) audioFile = type;

            if (audioFile) {
                const audio = new Audio(audioFile);
                audio.play().catch(e => console.error("Error playing sound:", e));
            }
        }

        // Fungsi timer
        function updateTimer() {
            let minutes = Math.floor(timeLeft / 60);
            let seconds = timeLeft % 60;
            document.getElementById("timer").textContent =
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                timerInterval = null;
                if (nomorSoal < totalSoal) {
                     skorSalah += (totalSoal - nomorSoal);
                     document.getElementById("skorSalah").textContent = skorSalah;
                }
                akhirPermainan();
            } else {
                 timeLeft--;
            }
        }


        // Fungsi mulai permainan
        function mulaiPermainan() {
            document.getElementById("startScreen").style.display = "none";
            document.getElementById("timerContainer").style.display = "flex";
            document.getElementById("pilihanGanda").style.display = "flex";
            document.getElementById("skor").style.display = "block";

            const gameArea = document.getElementById("gameArea");
            // gameArea.classList.add("popup-animation"); // Animation might be jarring when restarting
            playSound('start');

            if (!timerInterval && timeLeft > 0) {
                updateTimer();
                timerInterval = setInterval(updateTimer, 1000);
            } else if (!timerInterval && timeLeft <= 0) {
                akhirPermainan();
                return;
            }

            // setTimeout(() => { gameArea.classList.remove("popup-animation"); }, 500); // Remove if animation removed

            jawabanBenar = false;

            let soalTersedia = dataTebakan.filter(soal => !soalSudahDitampilkan.has(soal.deskripsi));

            if (soalTersedia.length === 0 || nomorSoal >= totalSoal) {
                if(timerInterval) clearInterval(timerInterval); // Ensure timer stops if finished early
                timerInterval = null;
                akhirPermainan();
                return;
            }

            nomorSoal++;

            soalSaatIni = soalTersedia[Math.floor(Math.random() * soalTersedia.length)];
            soalSudahDitampilkan.add(soalSaatIni.deskripsi);

            document.getElementById("judulGame").textContent = `Kuis Ramadhan 2 (${nomorSoal}/${totalSoal})`;
            document.getElementById("petunjuk").textContent = soalSaatIni.deskripsi;

            const pilihanContainer = document.getElementById("pilihanGanda");
            pilihanContainer.innerHTML = '';
            const shuffledPilihan = [...soalSaatIni.pilihan].sort(() => Math.random() - 0.5);

            shuffledPilihan.forEach(pilihanText => {
                const button = document.createElement("button");
                button.textContent = pilihanText; // Assumes data has a., b., etc.
                button.onclick = function() {
                    if (!jawabanBenar && timeLeft > 0 && timerInterval) {
                        cekJawaban(pilihanText, button);
                    }
                };
                pilihanContainer.appendChild(button);
            });

            document.getElementById("hasil").textContent = "";
            resetPilihan();

            document.getElementById("skorBenar").textContent = skorBenar;
            document.getElementById("skorSalah").textContent = skorSalah;
        }

        // Fungsi cek jawaban
        function cekJawaban(jawabanYangDipilih, buttonElement) {
            const pilihanButtons = document.querySelectorAll("#pilihanGanda button");
            pilihanButtons.forEach(btn => btn.onclick = null);

            if (jawabanYangDipilih === soalSaatIni.jawaban) {
                document.getElementById("hasil").textContent = "Benar!";
                playCorrectAnimation();
                playSound('success');
                jawabanBenar = true;
                skorBenar++;
                document.getElementById("skorBenar").textContent = skorBenar;
                buttonElement.style.backgroundColor = "#90EE90";

                setTimeout(() => {
                    if (nomorSoal < totalSoal && timeLeft > 0) {
                        mulaiPermainan();
                    } else {
                        if(timerInterval) clearInterval(timerInterval);
                        timerInterval = null;
                        akhirPermainan();
                    }
                }, 1500);
            } else {
                document.getElementById("hasil").textContent = "Salah!";
                playWrongAnimation();
                playSound('fail');
                buttonElement.classList.add("salah");
                buttonElement.style.animationPlayState = 'running';
                skorSalah++;
                document.getElementById("skorSalah").textContent = skorSalah;

                 pilihanButtons.forEach(btn => {
                    if (btn.textContent === soalSaatIni.jawaban) {
                        btn.style.backgroundColor = "#90EE90";
                    }
                 });

                setTimeout(() => {
                    buttonElement.style.animationPlayState = 'paused';
                    if (nomorSoal < totalSoal && timeLeft > 0) {
                        mulaiPermainan();
                    } else {
                         if(timerInterval) clearInterval(timerInterval);
                         timerInterval = null;
                         akhirPermainan();
                    }
                }, 2000);
            }
        }

        // Fungsi reset pilihan visual
        function resetPilihan() {
            const pilihanButtons = document.querySelectorAll("#pilihanGanda button");
            pilihanButtons.forEach(button => {
                button.classList.remove("selected", "salah");
                button.style.backgroundColor = "";
                button.style.animationPlayState = 'paused';
            });
        }

        // Fungsi animasi Lottie
        function playCorrectAnimation() {
             const animationContainer = document.getElementById('correctAnimation');
            animationContainer.style.display = 'block';
            animationContainer.innerHTML = '';
            try {
                lottie.loadAnimation({ container: animationContainer, renderer: 'svg', loop: false, autoplay: true, path: 'correctan.json' });
            } catch (error) { console.error("Lottie Error (Correct):", error); animationContainer.style.display = 'none'; }
            setTimeout(() => { animationContainer.style.display = 'none'; }, 2000);
         }
        function playWrongAnimation() {
            const animationContainer = document.getElementById('wrongAnimation');
            animationContainer.style.display = 'block';
            animationContainer.innerHTML = '';
             try {
                lottie.loadAnimation({ container: animationContainer, renderer: 'svg', loop: false, autoplay: true, path: 'wrong.json' });
             } catch (error) { console.error("Lottie Error (Wrong):", error); animationContainer.style.display = 'none'; }
            setTimeout(() => { animationContainer.style.display = 'none'; }, 2000);
        }

        // Fungsi akhir permainan
        function akhirPermainan() {
            if (timerInterval) { clearInterval(timerInterval); timerInterval = null; }
            if (isGameOverSoundPlayed) return;

            const skorAkhir = totalSoal > 0 ? (skorBenar / totalSoal) * 100 : 0;
            let warnaSkor, komentar, gameOverSoundFile;

            if (skorAkhir < 50) {
                gameOverSoundFile = 'ast.mp3'; komentar = "Belajar lagi ya....ððð¤­"; warnaSkor = "#FF0000";
            } else if (skorAkhir <= 84) {
                gameOverSoundFile = 'alh.mp3'; komentar = "Mantap....ð«¶ð»"; warnaSkor = "#FFA500";
            } else {
                gameOverSoundFile = 'masy.mp3'; komentar = "Kamu Luar Biasa...ðð»ðð»ðð»"; warnaSkor = "#008000";
            }

            document.getElementById("judulGame").textContent = "Permainan Selesai!";
             document.getElementById("petunjuk").innerHTML = `
                <span id="skorAkhir" style="color: ${warnaSkor};">Skor Akhir Anda: ${skorAkhir.toFixed(0)}%</span><br>
                Benar: ${skorBenar}<br>Salah: ${skorSalah}<br><br>${komentar}
            `;
            document.getElementById("pilihanGanda").innerHTML = "";
            document.getElementById("pilihanGanda").style.display = "none";
            document.getElementById("hasil").textContent = "";
            document.getElementById("timerContainer").style.display = "none";

            playSound('gameover', gameOverSoundFile);
            isGameOverSoundPlayed = true;

            const learnMoreButton = document.createElement("button");
            learnMoreButton.textContent = "Belajar Lagi";
            learnMoreButton.id = "learnMoreButton";
            learnMoreButton.onclick = () => {
                 window.location.href = 'https://drive.google.com/file/d/1hWKJqHEpmtaPVIaIVBsbU_2iFRCKIZS6/view?usp=sharing';
             };
            // Apply styles similar to #startButton for consistency
            learnMoreButton.style.fontSize = "24px";
            learnMoreButton.style.padding = "12px 20px";
            learnMoreButton.style.margin = "8px";
            learnMoreButton.style.border = "none";
            learnMoreButton.style.borderRadius = "8px";
            learnMoreButton.style.backgroundColor = "#F5E8C7";
            learnMoreButton.style.color = "#2E4A47";
            learnMoreButton.style.cursor = "pointer";
            learnMoreButton.style.transition = "background-color 0.3s ease";
            learnMoreButton.onmouseover = () => learnMoreButton.style.backgroundColor = "#E8DAB2";
            learnMoreButton.onmouseout = () => learnMoreButton.style.backgroundColor = "#F5E8C7";

            document.getElementById("gameArea").appendChild(learnMoreButton);
        }

        // Event listener untuk tombol start awal
        document.getElementById("startButton").addEventListener("click", () => {
             skorBenar = 0;
             skorSalah = 0;
             nomorSoal = 0;
             soalSudahDitampilkan.clear();
             isGameOverSoundPlayed = false;
             isStartSoundPlayed = false;
             timeLeft = 240;
             if(timerInterval) clearInterval(timerInterval);
             timerInterval = null;
             document.getElementById("skorBenar").textContent = "0";
             document.getElementById("skorSalah").textContent = "0";
             const oldLearnButton = document.getElementById("learnMoreButton");
             if (oldLearnButton) oldLearnButton.remove();
             document.getElementById("judulGame").textContent = "Kuis Ramadhan 2 (Edisi Zakat dan Idul Fitri)"; // Reset title
             document.getElementById("petunjuk").innerHTML = "Selamat datang di Kuis Ramadhan!"; // Reset text, use innerHTML in case of leftover HTML from score
             document.getElementById("petunjuk").style.color = "#333"; // Ensure default color
             mulaiPermainan();
        });

    </script>
</body>
</html>